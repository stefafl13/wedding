(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8270],{8384:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[weddingGuid]/venue/reception",function(){return c(13337)}])},89597:function(a,b,c){"use strict";var d=c(85893),e=c(67294),f=c(55162),g=c(56441),h=c.n(g),i=c(71893),j=c.n(i);function k(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function l(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){k(a,b,c[b])})}return a}b.Z=function(a){var b=function(a){var b=l({},n)[a].id,c=Array.from(u),d={};c.forEach(function(a){return d[a]=!0}),d[b]?delete d[b]:d[b]=!0,v(Object.keys(d))},c=function(a){r(a,u),v([])},g=function(a,b){var c=i||30;return(0,d.jsxs)("div",{className:"bp3-non-ideal-state",children:[(0,d.jsx)("br",{}),!(void 0!==b&&b)&&(0,d.jsxs)(e.Fragment,{children:[(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("div",{className:"bp3-non-ideal-state-visual",children:(0,d.jsx)("span",{className:"bp3-icon bp3-icon-cloud-upload"})}),(0,d.jsx)("h4",{className:"bp3-heading",children:j().get("upload_photos").d("…")})]}),(0,d.jsx)("p",{className:"wa-p",children:j().get("upload_try").d("…")}),(0,d.jsxs)("p",{className:"wa-p",children:[(0,d.jsx)("b",{children:j().get("upload_limit_count",{limit:c}).d("…")}),"\xa0",a&&Array.isArray(a)&&a.length>0?(0,d.jsx)("b",{children:j().get("upload_more",{value:c-a.length}).d("…")}):null,(0,d.jsx)("br",{}),j().get("upload_limit_size",{size:(k||20)+"Mb"}).d("…")]}),(0,d.jsx)("button",{className:"bp3-button bp3-intent-purple",children:j().get("upload_btn").d("…")}),(0,d.jsx)("br",{})]})},i=a.countLimit,k=a.sizeLimit,m=a.isActive,n=a.photos,o=a.queue,p=a.enableImageSelection,q=a.handleOnDrop,r=a.handleDeleteImages,s=a.handleNotificationActions,t=(0,e.useState)([]),u=t[0],v=t[1],w=(0,e.useRef)(),x={};u.forEach(function(a){return x[a]=!0});var y=n&&Array.isArray(n)?n.map(function(a,b){return{nano:a.nano,src:a.normal.f,thumbnail:a.thumb360.f,thumbnailWidth:a.thumb360.w,thumbnailHeight:a.thumb360.h,isSelected:!!x[a.id]}}):[];return(0,d.jsx)(f.ZP,{accept:"image/jpeg, image/png, image/webp, image/heic, image/avif",onDrop:function(a){if(m){var b=i||30,c=a.length,d=b-((n&&Array.isArray(n)?n.length:0)+(o||0));c>d&&(a=a.filter(function(a,b){return b<d}),s.pushToasts([{message:j().get("upload_reached_limit",{count:b}).d("…")}])),q(a,k||20)}},children:function(a){var e,f,i=a.getRootProps,k=a.getInputProps;return(0,d.jsxs)("div",l({className:"post-event__dropzone"},i(),{children:[(0,d.jsx)("input",l({},k())),(0,d.jsxs)("div",{children:[(0,d.jsx)(h(),{images:y,backdropClosesModal:!0,enableImageSelection:p,onSelectImage:b,ref:w}),o?(e=o,(0,d.jsx)("div",{className:"photo-loading",children:(0,d.jsxs)("span",{className:"photo-loading__counter",children:["+",e]})})):null]}),(f=u,(0,d.jsx)("div",{className:"col-xs-12 text-center",children:f.length>0?(0,d.jsx)("button",{className:"bp3-button bp3-intent-danger",onClick:c,children:j().get("upload_delete_btn").d("…")}):null})),y.length>0?g(n,!0):g()]}))}})}},13337:function(a,b,c){"use strict";c.r(b),c.d(b,{"__N_SSP":function(){return I}});var d=c(85893),e=c(67294),f=c(11163),g=c(70457),h=c(27208),i=c(41664),j=c(14890),k=c(66338),l=c(32743),m=c(59717),n=c(1237),o=c(27211),p=c(73572),q=c(30834),r=c(65732),s=c(14715),t=c(28258),u=c(89597);c(49836);var v=c(35196),w=c(20569),x=c(5582),y=c.n(x),z=c(68110),A=c(66912),B=c(91620),C=A.S.extract("templates/app"),D=C.t,E=A.S.extract("project/reception").t,F=A.S.extract(""),G=F.t,H={},I=!0;b.default=(0,k.$j)(function(a){return{user:a.user,wedding:a.wedding,vendors:a.vendors,reception:a.reception}},function(a){return{notificationActions:(0,j.DE)(l,a),weddingActions:(0,j.DE)(m,a),vendorsActions:(0,j.DE)(n,a),receptionActions:(0,j.DE)(o,a)}})(function(a){var b=function(){var a=W.updateReceptionInstant,b=W.setQueueUploadReception,c=W.addUploadReception,d=W.deleteUploadReception,e=V.followVendorToWeddingInstant,f=V.updateVendorInstant,g=V.unfollowVendorFromWeddingInstant;I.setCallBackEvents({updateReceptionInstant:a,setQueueUploadReception:b,addUploadReception:c,deleteUploadReception:d,followVendorToWeddingInstant:e,updateVendorInstant:f,unfollowVendorFromWeddingInstant:g})},c=function(a){var b=S.photos;clearInterval(H.photos),H.photos=setTimeout(function(){W.updateReception(o,{photos:b},!0)},void 0!==a&&a?0:300)},j=function(a,b){if("full"!==Q.access)return null;var c=0;a.forEach(function(a){var d=1048576*b;if(a.size>d)T.pushToasts([{message:G("upload_file_size_too_large",{size:b})}]);else{var e=new FormData();e.append("files",a),Y(Q._id,"reception",e,function(a){$(a),I.send({action:"addUploadReception",payload:a}),ea(!0)}),c+=1}}),c>0&&(Z(c),I.send({action:"setQueueUploadReception",payload:c}))},k=function(a){if("full"!==Q.access)return null;U.updateWedding(o,a,null,null,!0),U.updateWeddingInstant(a),I.send({action:"updateWeddingInstant",payload:a})},l=function(a,b,c){var d=a&&b?"".concat(a.replace(/ /g,"_"),"_&_").concat(b.replace(/ /g,"_"),"_"):"";return"".concat(d,"vendors_").concat(y()().format("DD-MMMM-YYYY"),".").concat(c)},m=(0,f.useRouter)(),n=m.locale,o=m.query.weddingGuid,x=(0,e.useRef)(null);n!==x.current&&(A.S.load(n,a.dict),x.current=n);var C=(0,e.useRef)(),F=C&&C.current?C.current:{},I=F.socket;F.handleShowSearchDialog,F.handleShowBusinessDialog;var J,K,L,M,N,O,P,Q=a.wedding,R=a.vendors,S=a.reception,T=a.notificationActions,U=a.weddingActions,V=a.vendorsActions,W=a.receptionActions,X=S.photos,Y=W.uploadPhotosReception,Z=W.setQueueUploadReception,$=W.addUploadReception,_=(0,e.useState)(0),aa=_[0],ba=_[1],ca=(0,e.useState)(null),da=ca[0],ea=ca[1];return(0,g.C)(function(){o&&"[weddingGuid]"!==o&&(W.getReception(o),V.getVendors(o))},[o]),(0,h.D)(function(){ba(aa+1)},[n]),(0,e.useEffect)(function(){return I&&b(I),function(){I&&I.setCallBackEvents({})}},[I]),(0,e.useEffect)(function(){da&&(c(!0),ea(null))},[X,da]),(0,d.jsxs)(p.Z,{ref:C,children:[(J=(0,v.R)("/project/".concat(o,"/venue/reception"),n),(0,d.jsx)(q.Z,{router:m,title:E("h2"),description:E("p"),alternate:"all",disableIndexing:"none",canonical:J,schemaLogo:JSON.stringify([B.c.generate(n)])})),(0,d.jsxs)("main",{className:"venue__container",children:[(0,d.jsx)("h1",{className:"wa-h2",children:E("h2")}),(0,d.jsx)("p",{className:"wa-p",children:E("p")}),Q._id?(L=(K=S||{}).comment,M=K.photos,N=K.queue,O=Q.reception_date,P=Q.reception_location,(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"venue__info",children:[(0,d.jsxs)("div",{className:"venue__info-details venue__info-calendar",children:[(0,d.jsx)("h2",{className:"venue__info-details-h2",children:E("reception_date")}),(0,d.jsx)(s.Z,{locale:n,weddingDate:O,placeholder:D("set_wedding_date"),handleUpdateDate:function(a){k({reception_date:a})}})]}),(0,d.jsxs)("div",{className:"venue__info-details venue__info-location",children:[(0,d.jsx)("h2",{className:"venue__info-details-h2",children:E("reception_location")}),(0,d.jsx)(t.Z,{location:P,placeholder:D("set_location"),dialogTitle:D("set_reception_location"),handleSetLocation:function(a){k({reception_location:a})}})]}),Q.hidden_services&&!Q.hidden_services.reception_layout?(0,d.jsxs)("div",{className:"venue__info-details venue__info-layout",children:[(0,d.jsx)("h2",{className:"venue__info-details-h2",children:E("reception_layout")}),(0,d.jsx)("div",{className:"venue__info-details-date",children:(0,d.jsx)(i.default,{href:"/project/".concat(o,"/supplies/reception-layout"),children:(0,d.jsx)("a",{children:E("plan_venue_layout")})})})]}):null]}),(0,d.jsx)("div",{className:"venue__comment",children:(0,d.jsx)(r.sL,{className:"basic__comment",value:L||"",multiline:!0,minLines:4,maxLines:1000,onChange:function(a){if("full"!==Q.access)return null;var b={comment:a};clearInterval(H.comment),H.comment=setTimeout(function(){W.updateReception(o,b,!0)},300),W.updateReceptionInstant(b),I.send({action:"updateReceptionInstant",payload:b})},placeholder:E("description_placeholder")})}),(0,d.jsx)(u.Z,{photos:M||[],queue:N,enableImageSelection:"full"===Q.access,isActive:"full"===Q.access,handleOnDrop:function(a,b){return j(a,b)},handleDeleteImages:function(a,b){if("full"!==Q.access)return null;W.deleteUploadReception(b),I.send({action:"deleteUploadReception",payload:b}),ea(!0),a.preventDefault(),a.stopPropagation()},handleNotificationActions:T}),(0,d.jsx)("br",{}),(0,d.jsx)("div",{className:"text-center",children:(0,d.jsx)(w.Z,{title:D("download_pdf_btn"),handleExport:function(b){var c=Q.guid,d=Q.groom,e=Q.bride,f={wli:a.user.wli,filename:l(d,e,"pdf")};V.getPdf(c,f,b)}})}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{})]})):(0,d.jsx)(z.Z,{})]})]})})},27208:function(a,b,c){"use strict";c.d(b,{D:function(){return e}});var d=c(67294);function e(a,b){var c=(0,d.useRef)(!1);(0,d.useEffect)(function(){c.current?a():c.current=!0},b)}}},function(a){a.O(0,[4885,4317,4116,5732,4734,6441,5162,3458,5506,3524,7868,7811,6120,3894,8262,1837,8470,6179,5083,42,1385,8442,9774,2888,179],function(){return a(a.s=8384)}),_N_E=a.O()}])